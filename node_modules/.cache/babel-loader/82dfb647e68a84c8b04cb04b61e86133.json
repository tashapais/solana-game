{"ast":null,"code":"var _jsxFileName = \"/Users/tashapais/Documents/Github/solana-games/src/pages/createNFT/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { useParams, Link, useHistory } from 'react-router-dom';\nimport LoadingOverlay from 'react-loading-overlay';\nimport { CircularProgressbar, buildStyles } from 'react-circular-progressbar';\nimport domToImage from 'dom-to-image';\nimport { connectOrGetPhantomProvider, Creator, dataURLtoFile, mintNFT } from '../../utils/nftCreation';\nimport { connection } from '../../utils/walletUtils';\nimport { PublicKey } from '@solana/web3.js';\nimport bg from '../../assets/images/bg-2.jpg';\nimport './index.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction GenerateNFT() {\n  _s();\n\n  const [playerName, setPlayerName] = useState('');\n  const [progress, setProgress] = useState(0);\n  const history = useHistory();\n  let {\n    score,\n    timeSpent\n  } = useParams();\n  const [provider, setProvider] = useState(window.solana);\n  let tokensSOLGEarned = Math.ceil(timeSpent / 30);\n\n  const changePlayerName = e => {\n    setPlayerName(e.target.value);\n  };\n\n  let inte;\n\n  const convertDOMtoBase64 = async () => {\n    const node = document.getElementById('gameNFT');\n    return domToImage.toPng(node);\n  };\n\n  const mintNFTHandler = async () => {\n    console.log('mintNFTHandler got called');\n\n    if (!provider || provider && !provider.isConnected) {\n      setProvider(connectOrGetPhantomProvider(true));\n      return;\n    }\n\n    const img = await convertDOMtoBase64();\n    const templateImage = dataURLtoFile(img, 'GameTemplate.png');\n    const ownerPublicKey = new PublicKey(provider.publicKey).toBase58();\n    const selfCreator = new Creator({\n      address: ownerPublicKey,\n      verified: true,\n      share: 100\n    });\n    const metadata = {\n      name: `TEST_NFT`,\n      symbol: 'MNFT',\n      creators: [selfCreator],\n      description: '',\n      sellerFeeBasisPoints: 0,\n      image: templateImage.name,\n      animation_url: '',\n      external_url: '',\n      properties: {\n        files: [templateImage],\n        category: 'image'\n      }\n    };\n    inte = setInterval(() => setProgress(prog => Math.min(prog + 1, 99)), 600); // Update progress inside mintNFT\n\n    try {\n      await mintNFT(connection, provider, {}, [templateImage], metadata, 1000000000);\n      clearInterval(inte);\n      setProgress(0);\n      alert(\"NFT created successfully\");\n      history.push('/');\n    } catch (e) {\n      clearInterval(inte);\n      setProgress(0);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(LoadingOverlay, {\n    active: progress,\n    spinner: /*#__PURE__*/_jsxDEV(CircularProgressbar, {\n      value: progress,\n      text: `${progress}%`,\n      styles: buildStyles({\n        // Rotation of path and trail, in number of turns (0-1)\n        // Whether to use rounded or flat corners on the ends - can use 'butt' or 'round'\n        strokeLinecap: 'butt',\n        // Text size\n        textSize: '16px',\n        // How long animation takes to go from one percentage to another, in seconds\n        pathTransitionDuration: 0.5,\n        // Can specify path transition in more detail, or remove it entirely\n        // pathTransition: 'none',\n        // Colors\n        pathColor: `#d21414`,\n        textColor: '#fff',\n        trailColor: `#fff`,\n        backgroundColor: '#3e98c7'\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 9\n    }, this),\n    text: \"Hold tight, NFT creation is in progress...\",\n    children: /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"wrapperDiv\",\n      style: {\n        backgroundPosition: 'center',\n        backgroundRepeat: 'no-repeat',\n        backgroundSize: 'cover'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"header\", {\n        className: \"header\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          children: [\" \", /*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"gameHeader\",\n            children: \"STACK GAME\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 25\n          }, this), \" \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 131,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 132,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        className: \"\",\n        style: {\n          'width': '500px',\n          textAlign: \"center\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-1/2 py-16 pb-16\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"lg:w-2/2 w-full lg:px-8 lg:py-20 mb-6 lg:mb-0 bg-gray-900 bg-opacity-50 px-16 rounded-xl\",\n              children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"text-white text-left text-3xl font-medium font-medium mb-2\",\n                children: \"Your NFT details!\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 138,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex mb-4\",\n                children: /*#__PURE__*/_jsxDEV(\"a\", {\n                  className: \"flex-grow text-white border-b-2 border-indigo-800 text-md px-1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 142,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 141,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n                className: \"w-full max-w-xl\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"w-100 py-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"block font-bold text-lg text-white mb-2\",\n                    for: \"grid-password\",\n                    children: \"Enter your name : \\xA0\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 147,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    id: \"name\",\n                    type: \"text\",\n                    value: playerName,\n                    onChange: changePlayerName,\n                    style: {\n                      height: \"30px\"\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 153,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 146,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-1/2 px-10 py-10\",\n          id: \"gameNFT\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative h-full rounded-lg text-center border-4 border-white flex justify-around flex-col py-7 nftImage\",\n            style: {\n              'background-image': `url(${bg})`,\n              backgroundPosition: 'center',\n              backgroundRepeat: 'no-repeat',\n              backgroundPosition: '0px 0px',\n              'backgroundSize': '500px 358px',\n              overflow: \"hidden\"\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"absolute w-full h-full opacity-80 bg-gray-900 z-0\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"text-white font-extrabold text-2xl\",\n              style: {\n                marginTop: '-55px',\n                color: \"white\"\n              },\n              children: \"Solgames NFT\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 21\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"relative z-10 score-Wrapper\",\n              children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"text-white text-2xl font-normal nftTextWrapper\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    textAlign: \"right\"\n                  },\n                  className: \"nftLeftText\",\n                  className: \"nftLeftText\",\n                  style: {\n                    color: \"white\"\n                  },\n                  children: \"Played by:\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 185,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-purple-300 font-bold rightText\",\n                  children: [playerName, ' ']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 188,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"text-white text-2xl font-normal nftTextWrapper\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    textAlign: \"right\"\n                  },\n                  className: \"nftLeftText\",\n                  style: {\n                    color: \"white\"\n                  },\n                  children: [\"Game score:\", ' ']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 193,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-purple-300 font-bold rightText\",\n                  children: score\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 196,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 192,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"text-white text-2xl font-normal nftTextWrapper\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    textAlign: \"right\"\n                  },\n                  className: \"nftLeftText\",\n                  style: {\n                    color: \"white\"\n                  },\n                  children: [\"Gameplay duration:\", ' ']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 199,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-purple-300 font-bold rightText\",\n                  children: [timeSpent, \" secs\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 202,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 198,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"text-white text-xl font-normal nftTextWrapper\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    textAlign: \"right\"\n                  },\n                  className: \"nftLeftText\",\n                  style: {\n                    color: \"white\"\n                  },\n                  children: [\"Game played on:\", ' ']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 207,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-purple-300 font-bold rightText\",\n                  children: new Date().toDateString()\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 210,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 206,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"text-white text-xl font-normal nftTextWrapper\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    textAlign: \"right\"\n                  },\n                  className: \"nftLeftText\",\n                  style: {\n                    color: \"white\"\n                  },\n                  children: [\"Tokens earned:\", ' ']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 215,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"text-purple-300 font-bold rightText\",\n                  children: [tokensSOLGEarned, \" SOLG\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 218,\n                  columnNumber: 21\n                }, this), ' ']\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 214,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 168,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          className: \"loginButton\",\n          onClick: mintNFTHandler,\n          style: {\n            width: \"320px\"\n          },\n          children: \"\\xA0 Create your NFT\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 5\n  }, this);\n}\n\n_s(GenerateNFT, \"WEiBlYVzBO+Ca434YB471/yj4q0=\", false, function () {\n  return [useHistory, useParams];\n});\n\n_c = GenerateNFT;\nexport default GenerateNFT;\n\nvar _c;\n\n$RefreshReg$(_c, \"GenerateNFT\");","map":{"version":3,"sources":["/Users/tashapais/Documents/Github/solana-games/src/pages/createNFT/index.js"],"names":["React","useState","useParams","Link","useHistory","LoadingOverlay","CircularProgressbar","buildStyles","domToImage","connectOrGetPhantomProvider","Creator","dataURLtoFile","mintNFT","connection","PublicKey","bg","GenerateNFT","playerName","setPlayerName","progress","setProgress","history","score","timeSpent","provider","setProvider","window","solana","tokensSOLGEarned","Math","ceil","changePlayerName","e","target","value","inte","convertDOMtoBase64","node","document","getElementById","toPng","mintNFTHandler","console","log","isConnected","img","templateImage","ownerPublicKey","publicKey","toBase58","selfCreator","address","verified","share","metadata","name","symbol","creators","description","sellerFeeBasisPoints","image","animation_url","external_url","properties","files","category","setInterval","prog","min","clearInterval","alert","push","strokeLinecap","textSize","pathTransitionDuration","pathColor","textColor","trailColor","backgroundColor","backgroundPosition","backgroundRepeat","backgroundSize","textAlign","height","overflow","marginTop","color","Date","toDateString","width"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { useParams, Link, useHistory } from 'react-router-dom';\nimport LoadingOverlay from 'react-loading-overlay';\nimport { CircularProgressbar, buildStyles } from 'react-circular-progressbar';\nimport domToImage from 'dom-to-image';\nimport {\n  connectOrGetPhantomProvider,\n  Creator,\n  dataURLtoFile,\n  mintNFT,\n} from '../../utils/nftCreation';\nimport { connection } from '../../utils/walletUtils';\nimport { PublicKey } from '@solana/web3.js';\nimport bg from '../../assets/images/bg-2.jpg';\nimport './index.css'\nfunction GenerateNFT() {\n  const [playerName, setPlayerName] = useState('');\n  const [progress, setProgress] = useState(0);\n\n  const history = useHistory()\n\n  let { score, timeSpent } = useParams();\n  const [provider, setProvider] = useState(window.solana);\n\n  let tokensSOLGEarned = Math.ceil(timeSpent / 30); \n  const changePlayerName = (e) => {\n    setPlayerName(e.target.value);\n  };\n\n  let inte;\n  const convertDOMtoBase64 = async () => {\n    const node = document.getElementById('gameNFT');\n    return domToImage.toPng(node);\n  };\n\n  const mintNFTHandler = async () => {\n    console.log('mintNFTHandler got called');\n\n    if (!provider || (provider && !provider.isConnected)) {\n      setProvider(connectOrGetPhantomProvider(true));\n      return;\n    }\n\n    const img = await convertDOMtoBase64();\n    const templateImage = dataURLtoFile(img, 'GameTemplate.png');\n    const ownerPublicKey = new PublicKey(provider.publicKey).toBase58();\n    const selfCreator = new Creator({\n      address: ownerPublicKey,\n      verified: true,\n      share: 100,\n    });\n    const metadata = {\n      name: `TEST_NFT`,\n      symbol: 'MNFT',\n      creators: [selfCreator],\n      description: '',\n      sellerFeeBasisPoints: 0,\n      image: templateImage.name,\n      animation_url: '',\n      external_url: '',\n      properties: {\n        files: [templateImage],\n        category: 'image',\n      },\n    };\n\n    inte = setInterval(\n      () => setProgress((prog) => Math.min(prog + 1, 99)),\n      600\n    );\n    // Update progress inside mintNFT\n    try {\n      await mintNFT(\n        connection,\n        provider,\n        {},\n        [templateImage],\n        metadata,\n        1000000000\n      );\n\n      clearInterval(inte);\n      setProgress(0);\n      alert(\"NFT created successfully\")\n      history.push('/')\n    } catch (e) {\n      clearInterval(inte);\n      setProgress(0);\n    }\n  };\n  return (\n    <LoadingOverlay\n      active={progress}\n      spinner={\n        <CircularProgressbar\n          value={progress}\n          text={`${progress}%`}\n          styles={buildStyles({\n            // Rotation of path and trail, in number of turns (0-1)\n            // Whether to use rounded or flat corners on the ends - can use 'butt' or 'round'\n\n            strokeLinecap: 'butt',\n            // Text size\n\n            textSize: '16px',\n            // How long animation takes to go from one percentage to another, in seconds\n\n            pathTransitionDuration: 0.5,\n            // Can specify path transition in more detail, or remove it entirely\n            // pathTransition: 'none',\n\n            // Colors\n            pathColor: `#d21414`,\n            textColor: '#fff',\n            trailColor: `#fff`,\n            backgroundColor: '#3e98c7',\n          })}\n        />\n      }\n      text=\"Hold tight, NFT creation is in progress...\"\n    >\n      <section\n        className=\"wrapperDiv\"\n        style={{\n          backgroundPosition: 'center',\n          backgroundRepeat: 'no-repeat',\n          backgroundSize: 'cover',\n        }}\n      >\n         <header className=\"header\">\n          <Link to=\"/\"> <h2 className=\"gameHeader\">STACK GAME</h2> </Link>\n          <Link></Link>\n        </header>\n          <section className=\"\" style={{'width': '500px', textAlign:\"center\"}}>\n            <div className=\"w-1/2 py-16 pb-16\">\n              <div className=\"\">\n                <div className=\"lg:w-2/2 w-full lg:px-8 lg:py-20 mb-6 lg:mb-0 bg-gray-900 bg-opacity-50 px-16 rounded-xl\">\n                  <h1 className=\"text-white text-left text-3xl font-medium font-medium mb-2\">\n                    Your NFT details!\n                  </h1>\n                  <div className=\"flex mb-4\">\n                    <a className=\"flex-grow text-white border-b-2 border-indigo-800 text-md px-1\"></a>\n                  </div>\n\n                  <form className=\"w-full max-w-xl\">\n                    <div className=\"w-100 py-2\">\n                      <label\n                        className=\"block font-bold text-lg text-white mb-2\"\n                        for=\"grid-password\"\n                      >\n                        Enter your name : &nbsp;\n                      </label>\n                      <input\n                        id=\"name\"\n                        type=\"text\"\n                        value={playerName}\n                        onChange={changePlayerName}\n                        style={{height:\"30px\"}}\n                      />\n                    </div>\n                  </form>\n                </div>\n              </div>\n            </div>\n            <br />\n\n            <div className=\"w-1/2 px-10 py-10\" id=\"gameNFT\" >\n              <div\n                className=\"relative h-full rounded-lg text-center border-4 border-white flex justify-around flex-col py-7 nftImage\"\n                style={{\n                  'background-image': `url(${bg})`,\n                  backgroundPosition: 'center',\n                  backgroundRepeat: 'no-repeat',\n                  backgroundPosition: '0px 0px',\n                  'backgroundSize': '500px 358px',\n                  overflow:\"hidden\",\n                }}\n              >\n                <div className=\"absolute w-full h-full opacity-80 bg-gray-900 z-0\"></div>\n                    <h1 className=\"text-white font-extrabold text-2xl\" style={{    marginTop: '-55px', color:\"white\"}}>\n                      Solgames NFT\n                    </h1>\n                <div className=\"relative z-10 score-Wrapper\">\n                  <h1 className=\"text-white text-2xl font-normal nftTextWrapper\">\n                    <div style={{textAlign:\"right\"}} className=\"nftLeftText\" className=\"nftLeftText\" style={{color:\"white\"}}>\n                    Played by:\n                    </div>\n                    <div className=\"text-purple-300 font-bold rightText\">\n                      {playerName}{' '}\n                    </div>\n                  </h1>\n                  <h1 className=\"text-white text-2xl font-normal nftTextWrapper\">\n                  <div style={{textAlign:\"right\"}} className=\"nftLeftText\" style={{color:\"white\"}}>\n                    Game score:{' '}\n                    </div>\n                    <div className=\"text-purple-300 font-bold rightText\">{score}</div>\n                  </h1>\n                  <h1 className=\"text-white text-2xl font-normal nftTextWrapper\">\n                  <div style={{textAlign:\"right\"}} className=\"nftLeftText\" style={{color:\"white\"}}>\n                    Gameplay duration:{' '}\n                    </div>\n                    <div className=\"text-purple-300 font-bold rightText\">\n                      {timeSpent} secs\n                    </div>\n                  </h1>\n                  <h1 className=\"text-white text-xl font-normal nftTextWrapper\">\n                  <div style={{textAlign:\"right\"}} className=\"nftLeftText\" style={{color:\"white\"}}>\n                    Game played on:{' '}\n                    </div>\n                    <div className=\"text-purple-300 font-bold rightText\">\n                      {new Date().toDateString()}\n                    </div>\n                  </h1>\n                  <h1 className=\"text-white text-xl font-normal nftTextWrapper\">\n                  <div style={{textAlign:\"right\"}} className=\"nftLeftText\" style={{color:\"white\"}}>\n                    Tokens earned:{' '}\n                    </div>\n                    <div className=\"text-purple-300 font-bold rightText\">\n                      {tokensSOLGEarned} SOLG\n                    </div>{' '}\n                    \n                  </h1>\n                </div>\n              </div>\n            </div>\n            <button\n                      type=\"button\"\n                      className=\"loginButton\"\n                      onClick={mintNFTHandler}\n                      style={{width:\"320px\"}}\n                    >\n                      &nbsp; Create your NFT\n                    </button>\n          </section>\n      </section>\n    </LoadingOverlay>\n  );\n}\nexport default GenerateNFT;\n"]},"metadata":{},"sourceType":"module"}