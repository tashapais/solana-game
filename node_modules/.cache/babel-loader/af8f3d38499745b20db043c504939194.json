{"ast":null,"code":"var _jsxFileName = \"/Users/tashapais/Documents/Github/solana-games/src/pages/purchase/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { Link, useHistory, useParams } from 'react-router-dom';\nimport Cards from 'react-credit-cards';\nimport { formatCreditCardNumber, formatCVC, formatExpirationDate, formatNumber } from './../../utils/cardUtils';\nimport '../../assets/css/styles-compiled.css';\nimport './index.css';\nimport LoadingOverlay from 'react-loading-overlay';\nimport { CircularProgressbar, buildStyles } from 'react-circular-progressbar';\nimport 'react-confirm-alert/src/react-confirm-alert.css';\nimport 'react-circular-progressbar/dist/styles.css';\nimport { sleepUtil } from '../../utils/sleepUtil';\nimport { toast, ToastContainer } from 'react-toastify';\nimport { checkPaymentStatus, fetchPCIKeys, makePayment, requestSOLFromBackend } from '../../utils/paymentGateway';\nimport { PublicKey } from '@solana/web3.js';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst defaultCardValues = {\n  number: '5545 2345 2342 2342',\n  name: 'Solgamer ',\n  expiry: '04/23',\n  cvc: '454',\n  issuer: '',\n  focused: '',\n  amount: '1',\n  equivalentSOL: 1,\n  formData: null\n};\n\nfunction Purchase() {\n  _s();\n\n  const history = useHistory();\n  const [progress, setProgress] = useState(0);\n  const [provider, setProvider] = useState(window.solana);\n  const [cardState, setCardState] = useState({ ...defaultCardValues\n  });\n  const [initialText, setText] = useState('Hold tight, we are deducting the required SOL tokens to play...');\n\n  const handleInputFocus = e => {\n    setCardState({ ...cardState,\n      focus: e.target.name\n    });\n  };\n\n  const handleInputChange = e => {\n    let {\n      name,\n      value\n    } = e.target;\n    let equivalentSOL = cardState.equivalentSOL;\n\n    if (name === 'number') {\n      value = formatCreditCardNumber(value);\n    } else if (name === 'expiry') {\n      value = formatExpirationDate(value);\n    } else if (name === 'cvc') {\n      value = formatCVC(value);\n    } else if (name === 'amount') {\n      value = formatNumber(value);\n      equivalentSOL = parseFloat(value) * 100;\n    }\n\n    setCardState({ ...cardState,\n      equivalentSOL,\n      [name]: value\n    });\n  };\n\n  const submitCardTransaction = async () => {\n    let inte = setInterval(() => setProgress(prog => Math.min(prog + 1, 99)), 600);\n    const pciKeys = await fetchPCIKeys();\n    setText('Initiating the transaction...');\n    const result = await makePayment({ ...cardState,\n      ...pciKeys\n    });\n    setText('Checking the payment status...');\n    await checkPaymentStatus(result.paymentData.id);\n    setText(`Transaction successful, We are transferring your account with ${cardState.equivalentSOL} SOL tokens...`);\n    await sleepUtil(2000);\n    clearInterval(inte);\n    await requestSOLFromBackend(cardState.equivalentSOL, new PublicKey(provider.publicKey).toBase58());\n    setProgress(100);\n    toast.success(`We have successfully transferred ${cardState.equivalentSOL} SOL tokens to your phantom wallet...`);\n    await sleepUtil(3000);\n    toast.info(`Taking you to the game menu...`);\n    await sleepUtil(500);\n    history.push(`/stack`);\n    setCardState({ ...defaultCardValues\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(LoadingOverlay, {\n    active: progress > 0 && progress < 100,\n    spinner: /*#__PURE__*/_jsxDEV(CircularProgressbar, {\n      value: progress,\n      text: `${progress}%`,\n      styles: buildStyles({\n        width: '300px',\n        // Rotation of path and trail, in number of turns (0-1)\n        // Whether to use rounded or flat corners on the ends - can use 'butt' or 'round'\n        strokeLinecap: 'butt',\n        // Text size\n        textSize: '16px',\n        // How long animation takes to go from one percentage to another, in seconds\n        pathTransitionDuration: 0.5,\n        // Can specify path transition in more detail, or remove it entirely\n        // pathTransition: 'none',\n        // Colors\n        pathColor: `#03C221`,\n        textColor: '#fff',\n        trailColor: `#fff`,\n        backgroundColor: '#3e98c7'\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }, this),\n    text: initialText,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          backgroundImage: 'url(\"./hero_bg.svg\")',\n          backgroundSize: 'auto 100vh',\n          backgroundAttachment: 'fixed'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"headingDiv\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              children: \"Payment Gateway\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-white\",\n              children: \"Note: Dummy details are prefilled. The below transaction can be done with random card details. Please DO NOT enter real card details.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 148,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 155,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            class: \"w-full flex justify-center p-16 rounded-md bg-gray-900 bg-opacity-40 glowing-theme-blue mt-4 paymentDiv\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"w-1/2 mx-auto text-gray-400\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"mb-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  class: \"font-bold text-md ml-1 \",\n                  children: \"Name on card\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 159,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    name: \"name\",\n                    placeholder: \"Name\",\n                    required: true,\n                    value: cardState.name,\n                    onChange: handleInputChange,\n                    onFocus: handleInputFocus,\n                    class: \"w-full px-3 py-3 mt-2 bg-gray-800 mb-1 border-2 border-gray-800 rounded-md focus:outline-none focus:border-indigo-500 transition-colors\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 161,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 160,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 158,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"mb-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  class: \"font-bold text-md ml-1\",\n                  children: \"Card number\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 174,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"tel\",\n                    name: \"number\",\n                    placeholder: \"Card Number\",\n                    value: cardState.number,\n                    onChange: handleInputChange,\n                    onFocus: handleInputFocus,\n                    class: \"w-full px-3 py-3 mt-2 bg-gray-800 mb-1 border-2 border-gray-800 rounded-md focus:outline-none focus:border-indigo-500 transition-colors\",\n                    placeholder: \"0000 0000 0000 0000\",\n                    type: \"text\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 176,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 175,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 173,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"mb-4 -mx-2 flex items-end\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"px-2 w-1/2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                    class: \"font-bold text-md ml-1\",\n                    children: \"Expiration date\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 191,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: /*#__PURE__*/_jsxDEV(\"input\", {\n                      type: \"tel\",\n                      name: \"expiry\",\n                      placeholder: \"Valid Thru\",\n                      pattern: \"\\\\d\\\\d/\\\\d\\\\d\",\n                      required: true,\n                      value: cardState.expiry,\n                      onChange: handleInputChange,\n                      onFocus: handleInputFocus,\n                      class: \"w-full px-3 py-3 mt-2 bg-gray-800 mb-1 border-2 border-gray-800 rounded-md focus:outline-none focus:border-indigo-500 transition-colors\",\n                      placeholder: \"04/21\",\n                      type: \"text\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 195,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 194,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 190,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  class: \"mb-4 -mx-2 flex items-end\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    class: \"px-2 w-1/2\",\n                    children: /*#__PURE__*/_jsxDEV(\"label\", {\n                      class: \"font-bold text-md ml-1\",\n                      children: \"CVV\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 212,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 211,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"tel\",\n                    name: \"cvc\",\n                    placeholder: \"CVC\",\n                    pattern: \"\\\\d{3,4}\",\n                    required: true,\n                    value: cardState.cvc,\n                    onChange: handleInputChange,\n                    onFocus: handleInputFocus,\n                    class: \"w-full px-3 py-3 mt-2  bg-gray-800 mb-1 border-2 border-gray-800 rounded-md focus:outline-none focus:border-indigo-500 transition-colors\",\n                    placeholder: \"CVV\",\n                    type: \"text\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 214,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 210,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"mb-4\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  class: \"font-bold text-md ml-1\",\n                  children: \"Billing Address\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 230,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"textarea\", {\n                    class: \"w-full px-3 py-2  bg-gray-800 h-48 mt-2 mb-1 border-2 border-gray-800 rounded-md focus:outline-none focus:border-indigo-500 transition-colors\",\n                    placeholder: \"Enter your Address\",\n                    type: \"text\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 234,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 233,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 229,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                class: \"mb-8\",\n                children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                  class: \"font-bold text-md ml-1\",\n                  children: \"Phone number\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 242,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    class: \"w-full px-3 py-3 mt-2  bg-gray-800 mb-1 border-2 border-gray-800 rounded-md focus:outline-none focus:border-indigo-500 transition-colors\",\n                    placeholder: \"+919998887771\",\n                    type: \"text\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 244,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 243,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 241,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mb-8\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"text\",\n                    name: \"amount\",\n                    className: \"w-full px-4 py-3 my-2 rounded bg-gray-800 bg-opacity-80 text-white\",\n                    placeholder: \"Amount (USD)\",\n                    required: true,\n                    value: cardState.amount,\n                    onChange: handleInputChange,\n                    onFocus: handleInputFocus\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 253,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"pt-2 text-gray-300 text-sm\",\n                    children: \"1 USD = 1 SOL\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 263,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 252,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 251,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  class: \"payButton\",\n                  onClick: submitCardTransaction,\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    class: \"mdi mdi-lock-outline mr-1\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 273,\n                    columnNumber: 21\n                  }, this), \" PAY NOW\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 269,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 268,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 157,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              class: \"w-1/2 mx-auto text-gray-700 pt-28\",\n              children: /*#__PURE__*/_jsxDEV(Cards, {\n                cvc: cardState.cvc,\n                expiry: cardState.expiry,\n                focused: cardState.focus,\n                name: cardState.name,\n                number: cardState.number\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ToastContainer, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 290,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 104,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Purchase, \"FfTSuNz2J22f4vrb7Vf8sZHOObs=\", false, function () {\n  return [useHistory];\n});\n\n_c = Purchase;\nexport default Purchase;\n\nvar _c;\n\n$RefreshReg$(_c, \"Purchase\");","map":{"version":3,"sources":["/Users/tashapais/Documents/Github/solana-games/src/pages/purchase/index.js"],"names":["React","useState","Link","useHistory","useParams","Cards","formatCreditCardNumber","formatCVC","formatExpirationDate","formatNumber","LoadingOverlay","CircularProgressbar","buildStyles","sleepUtil","toast","ToastContainer","checkPaymentStatus","fetchPCIKeys","makePayment","requestSOLFromBackend","PublicKey","defaultCardValues","number","name","expiry","cvc","issuer","focused","amount","equivalentSOL","formData","Purchase","history","progress","setProgress","provider","setProvider","window","solana","cardState","setCardState","initialText","setText","handleInputFocus","e","focus","target","handleInputChange","value","parseFloat","submitCardTransaction","inte","setInterval","prog","Math","min","pciKeys","result","paymentData","id","clearInterval","publicKey","toBase58","success","info","push","width","strokeLinecap","textSize","pathTransitionDuration","pathColor","textColor","trailColor","backgroundColor","backgroundImage","backgroundSize","backgroundAttachment"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,IAAT,EAAeC,UAAf,EAA2BC,SAA3B,QAA4C,kBAA5C;AACA,OAAOC,KAAP,MAAkB,oBAAlB;AACA,SACEC,sBADF,EAEEC,SAFF,EAGEC,oBAHF,EAIEC,YAJF,QAKO,yBALP;AAMA,OAAO,sCAAP;AACA,OAAO,aAAP;AACA,OAAOC,cAAP,MAA2B,uBAA3B;AACA,SAASC,mBAAT,EAA8BC,WAA9B,QAAiD,4BAAjD;AACA,OAAO,iDAAP;AACA,OAAO,4CAAP;AACA,SAASC,SAAT,QAA0B,uBAA1B;AACA,SAASC,KAAT,EAAgBC,cAAhB,QAAsC,gBAAtC;AACA,SAASC,kBAAT,EAA6BC,YAA7B,EAA2CC,WAA3C,EAAwDC,qBAAxD,QAAqF,4BAArF;AACA,SAASC,SAAT,QAA0B,iBAA1B;;AACA,MAAMC,iBAAiB,GAAG;AACxBC,EAAAA,MAAM,EAAE,qBADgB;AAExBC,EAAAA,IAAI,EAAE,WAFkB;AAGxBC,EAAAA,MAAM,EAAE,OAHgB;AAIxBC,EAAAA,GAAG,EAAE,KAJmB;AAKxBC,EAAAA,MAAM,EAAE,EALgB;AAMxBC,EAAAA,OAAO,EAAE,EANe;AAOxBC,EAAAA,MAAM,EAAE,GAPgB;AAQxBC,EAAAA,aAAa,EAAE,CARS;AASxBC,EAAAA,QAAQ,EAAE;AATc,CAA1B;;AAYA,SAASC,QAAT,GAAoB;AAAA;;AAClB,QAAMC,OAAO,GAAG7B,UAAU,EAA1B;AACA,QAAM,CAAC8B,QAAD,EAAWC,WAAX,IAA0BjC,QAAQ,CAAC,CAAD,CAAxC;AACA,QAAM,CAACkC,QAAD,EAAWC,WAAX,IAA0BnC,QAAQ,CAACoC,MAAM,CAACC,MAAR,CAAxC;AACA,QAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BvC,QAAQ,CAAC,EACzC,GAAGoB;AADsC,GAAD,CAA1C;AAGA,QAAM,CAACoB,WAAD,EAAcC,OAAd,IAAyBzC,QAAQ,CACrC,iEADqC,CAAvC;;AAIA,QAAM0C,gBAAgB,GAAIC,CAAD,IAAO;AAC9BJ,IAAAA,YAAY,CAAC,EACX,GAAGD,SADQ;AAGXM,MAAAA,KAAK,EAAED,CAAC,CAACE,MAAF,CAASvB;AAHL,KAAD,CAAZ;AAKD,GAND;;AAQA,QAAMwB,iBAAiB,GAAIH,CAAD,IAAO;AAC/B,QAAI;AAAErB,MAAAA,IAAF;AAAQyB,MAAAA;AAAR,QAAkBJ,CAAC,CAACE,MAAxB;AACA,QAAIjB,aAAa,GAAGU,SAAS,CAACV,aAA9B;;AACA,QAAIN,IAAI,KAAK,QAAb,EAAuB;AACrByB,MAAAA,KAAK,GAAG1C,sBAAsB,CAAC0C,KAAD,CAA9B;AACD,KAFD,MAEO,IAAIzB,IAAI,KAAK,QAAb,EAAuB;AAC5ByB,MAAAA,KAAK,GAAGxC,oBAAoB,CAACwC,KAAD,CAA5B;AACD,KAFM,MAEA,IAAIzB,IAAI,KAAK,KAAb,EAAoB;AACzByB,MAAAA,KAAK,GAAGzC,SAAS,CAACyC,KAAD,CAAjB;AACD,KAFM,MAEA,IAAIzB,IAAI,KAAK,QAAb,EAAuB;AAC5ByB,MAAAA,KAAK,GAAGvC,YAAY,CAACuC,KAAD,CAApB;AACAnB,MAAAA,aAAa,GAAGoB,UAAU,CAACD,KAAD,CAAV,GAAoB,GAApC;AACD;;AAEDR,IAAAA,YAAY,CAAC,EACX,GAAGD,SADQ;AAEXV,MAAAA,aAFW;AAGX,OAACN,IAAD,GAAQyB;AAHG,KAAD,CAAZ;AAKD,GAnBD;;AAqBA,QAAME,qBAAqB,GAAG,YAAY;AACxC,QAAIC,IAAI,GAAGC,WAAW,CACpB,MAAMlB,WAAW,CAAEmB,IAAD,IAAUC,IAAI,CAACC,GAAL,CAASF,IAAI,GAAG,CAAhB,EAAmB,EAAnB,CAAX,CADG,EAEpB,GAFoB,CAAtB;AAIA,UAAMG,OAAO,GAAG,MAAMvC,YAAY,EAAlC;AACAyB,IAAAA,OAAO,CAAC,+BAAD,CAAP;AACA,UAAMe,MAAM,GAAG,MAAMvC,WAAW,CAAC,EAAE,GAAGqB,SAAL;AAAgB,SAAGiB;AAAnB,KAAD,CAAhC;AACAd,IAAAA,OAAO,CAAC,gCAAD,CAAP;AACA,UAAM1B,kBAAkB,CAACyC,MAAM,CAACC,WAAP,CAAmBC,EAApB,CAAxB;AACAjB,IAAAA,OAAO,CACJ,iEAAgEH,SAAS,CAACV,aAC1E,gBAFI,CAAP;AAIA,UAAMhB,SAAS,CAAC,IAAD,CAAf;AACA+C,IAAAA,aAAa,CAACT,IAAD,CAAb;AAEA,UAAMhC,qBAAqB,CAACoB,SAAS,CAACV,aAAX,EAA0B,IAAIT,SAAJ,CAAce,QAAQ,CAAC0B,SAAvB,EAAkCC,QAAlC,EAA1B,CAA3B;AAEA5B,IAAAA,WAAW,CAAC,GAAD,CAAX;AACApB,IAAAA,KAAK,CAACiD,OAAN,CACG,oCAAmCxB,SAAS,CAACV,aAC7C,uCAFH;AAIA,UAAMhB,SAAS,CAAC,IAAD,CAAf;AACAC,IAAAA,KAAK,CAACkD,IAAN,CAAY,gCAAZ;AACA,UAAMnD,SAAS,CAAC,GAAD,CAAf;AACAmB,IAAAA,OAAO,CAACiC,IAAR,CAAc,QAAd;AACAzB,IAAAA,YAAY,CAAC,EAAE,GAAGnB;AAAL,KAAD,CAAZ;AACD,GA7BD;;AA+BA,sBACE,QAAC,cAAD;AACE,IAAA,MAAM,EAAEY,QAAQ,GAAG,CAAX,IAAgBA,QAAQ,GAAG,GADrC;AAEE,IAAA,OAAO,eACL,QAAC,mBAAD;AACE,MAAA,KAAK,EAAEA,QADT;AAEE,MAAA,IAAI,EAAG,GAAEA,QAAS,GAFpB;AAGE,MAAA,MAAM,EAAErB,WAAW,CAAC;AAClBsD,QAAAA,KAAK,EAAE,OADW;AAElB;AACA;AAEAC,QAAAA,aAAa,EAAE,MALG;AAMlB;AAEAC,QAAAA,QAAQ,EAAE,MARQ;AASlB;AAEAC,QAAAA,sBAAsB,EAAE,GAXN;AAYlB;AACA;AAEA;AACAC,QAAAA,SAAS,EAAG,SAhBM;AAiBlBC,QAAAA,SAAS,EAAE,MAjBO;AAkBlBC,QAAAA,UAAU,EAAG,MAlBK;AAmBlBC,QAAAA,eAAe,EAAE;AAnBC,OAAD;AAHrB;AAAA;AAAA;AAAA;AAAA,YAHJ;AA6BE,IAAA,IAAI,EAAEhC,WA7BR;AAAA,2BA+BE;AAAA,8BACE;AACE,QAAA,KAAK,EAAE;AACLiC,UAAAA,eAAe,EAAE,sBADZ;AAELC,UAAAA,cAAc,EAAE,YAFX;AAGLC,UAAAA,oBAAoB,EAAE;AAHjB,SADT;AAAA,+BAOE;AAAA,kCACE;AAAK,YAAA,SAAS,EAAC,YAAf;AAAA,oCACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eAIE;AAAM,cAAA,SAAS,EAAC,YAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAYE;AAAA;AAAA;AAAA;AAAA,kBAZF,eAaE;AAAK,YAAA,KAAK,EAAC,yGAAX;AAAA,oCACE;AAAK,cAAA,KAAK,EAAC,6BAAX;AAAA,sCACE;AAAK,gBAAA,KAAK,EAAC,MAAX;AAAA,wCACE;AAAO,kBAAA,KAAK,EAAC,yBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAEE;AAAA,yCACE;AACE,oBAAA,IAAI,EAAC,MADP;AAEE,oBAAA,IAAI,EAAC,MAFP;AAGE,oBAAA,WAAW,EAAC,MAHd;AAIE,oBAAA,QAAQ,MAJV;AAKE,oBAAA,KAAK,EAAErC,SAAS,CAAChB,IALnB;AAME,oBAAA,QAAQ,EAAEwB,iBANZ;AAOE,oBAAA,OAAO,EAAEJ,gBAPX;AAQE,oBAAA,KAAK,EAAC;AARR;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,wBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,eAgBE;AAAK,gBAAA,KAAK,EAAC,MAAX;AAAA,wCACE;AAAO,kBAAA,KAAK,EAAC,wBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAEE;AAAA,yCACE;AACE,oBAAA,IAAI,EAAC,KADP;AAEE,oBAAA,IAAI,EAAC,QAFP;AAGE,oBAAA,WAAW,EAAC,aAHd;AAIE,oBAAA,KAAK,EAAEJ,SAAS,CAACjB,MAJnB;AAKE,oBAAA,QAAQ,EAAEyB,iBALZ;AAME,oBAAA,OAAO,EAAEJ,gBANX;AAOE,oBAAA,KAAK,EAAC,yIAPR;AAQE,oBAAA,WAAW,EAAC,qBARd;AASE,oBAAA,IAAI,EAAC;AATP;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,wBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,sBAhBF,eAgCE;AAAK,gBAAA,KAAK,EAAC,2BAAX;AAAA,wCACE;AAAK,kBAAA,KAAK,EAAC,YAAX;AAAA,0CACE;AAAO,oBAAA,KAAK,EAAC,wBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BADF,eAIE;AAAA,2CACE;AACE,sBAAA,IAAI,EAAC,KADP;AAEE,sBAAA,IAAI,EAAC,QAFP;AAGE,sBAAA,WAAW,EAAC,YAHd;AAIE,sBAAA,OAAO,EAAC,eAJV;AAKE,sBAAA,QAAQ,MALV;AAME,sBAAA,KAAK,EAAEJ,SAAS,CAACf,MANnB;AAOE,sBAAA,QAAQ,EAAEuB,iBAPZ;AAQE,sBAAA,OAAO,EAAEJ,gBARX;AASE,sBAAA,KAAK,EAAC,yIATR;AAUE,sBAAA,WAAW,EAAC,OAVd;AAWE,sBAAA,IAAI,EAAC;AAXP;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,0BAJF;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAqBE;AAAK,kBAAA,KAAK,EAAC,2BAAX;AAAA,0CACE;AAAK,oBAAA,KAAK,EAAC,YAAX;AAAA,2CACE;AAAO,sBAAA,KAAK,EAAC,wBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,0BADF,eAIE;AACE,oBAAA,IAAI,EAAC,KADP;AAEE,oBAAA,IAAI,EAAC,KAFP;AAGE,oBAAA,WAAW,EAAC,KAHd;AAIE,oBAAA,OAAO,EAAC,UAJV;AAKE,oBAAA,QAAQ,MALV;AAME,oBAAA,KAAK,EAAEJ,SAAS,CAACd,GANnB;AAOE,oBAAA,QAAQ,EAAEsB,iBAPZ;AAQE,oBAAA,OAAO,EAAEJ,gBARX;AASE,oBAAA,KAAK,EAAC,0IATR;AAUE,oBAAA,WAAW,EAAC,KAVd;AAWE,oBAAA,IAAI,EAAC;AAXP;AAAA;AAAA;AAAA;AAAA,0BAJF;AAAA;AAAA;AAAA;AAAA;AAAA,wBArBF;AAAA;AAAA;AAAA;AAAA;AAAA,sBAhCF,eAwEE;AAAK,gBAAA,KAAK,EAAC,MAAX;AAAA,wCACE;AAAO,kBAAA,KAAK,EAAC,wBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAIE;AAAA,yCACE;AACE,oBAAA,KAAK,EAAC,+IADR;AAEE,oBAAA,WAAW,EAAC,oBAFd;AAGE,oBAAA,IAAI,EAAC;AAHP;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,wBAJF;AAAA;AAAA;AAAA;AAAA;AAAA,sBAxEF,eAoFE;AAAK,gBAAA,KAAK,EAAC,MAAX;AAAA,wCACE;AAAO,kBAAA,KAAK,EAAC,wBAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADF,eAEE;AAAA,yCACE;AACE,oBAAA,KAAK,EAAC,0IADR;AAEE,oBAAA,WAAW,EAAC,eAFd;AAGE,oBAAA,IAAI,EAAC;AAHP;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,wBAFF;AAAA;AAAA;AAAA;AAAA;AAAA,sBApFF,eA8FE;AAAK,gBAAA,SAAS,EAAC,MAAf;AAAA,uCACE;AAAA,0CACE;AACE,oBAAA,IAAI,EAAC,MADP;AAEE,oBAAA,IAAI,EAAC,QAFP;AAGE,oBAAA,SAAS,EAAC,oEAHZ;AAIE,oBAAA,WAAW,EAAC,cAJd;AAKE,oBAAA,QAAQ,MALV;AAME,oBAAA,KAAK,EAAEJ,SAAS,CAACX,MANnB;AAOE,oBAAA,QAAQ,EAAEmB,iBAPZ;AAQE,oBAAA,OAAO,EAAEJ;AARX;AAAA;AAAA;AAAA;AAAA,0BADF,eAWE;AAAO,oBAAA,SAAS,EAAC,4BAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAXF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBA9FF,eA+GE;AAAA,uCACE;AACE,kBAAA,KAAK,EAAC,WADR;AAEE,kBAAA,OAAO,EAAEO,qBAFX;AAAA,0CAIE;AAAG,oBAAA,KAAK,EAAC;AAAT;AAAA;AAAA;AAAA;AAAA,0BAJF;AAAA;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,sBA/GF;AAAA;AAAA;AAAA;AAAA;AAAA,oBADF,eA0HE;AAAK,cAAA,KAAK,EAAC,mCAAX;AAAA,qCACE,QAAC,KAAD;AACE,gBAAA,GAAG,EAAEX,SAAS,CAACd,GADjB;AAEE,gBAAA,MAAM,EAAEc,SAAS,CAACf,MAFpB;AAGE,gBAAA,OAAO,EAAEe,SAAS,CAACM,KAHrB;AAIE,gBAAA,IAAI,EAAEN,SAAS,CAAChB,IAJlB;AAKE,gBAAA,MAAM,EAAEgB,SAAS,CAACjB;AALpB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBA1HF;AAAA;AAAA;AAAA;AAAA;AAAA,kBAbF;AAAA;AAAA;AAAA;AAAA;AAAA;AAPF;AAAA;AAAA;AAAA;AAAA,cADF,eA2JE,QAAC,cAAD;AAAA;AAAA;AAAA;AAAA,cA3JF;AAAA;AAAA;AAAA;AAAA;AAAA;AA/BF;AAAA;AAAA;AAAA;AAAA,UADF;AA+LD;;GAtQQS,Q;UACS5B,U;;;KADT4B,Q;AAuQT,eAAeA,QAAf","sourcesContent":["import React, { useState } from 'react';\nimport { Link, useHistory, useParams } from 'react-router-dom';\nimport Cards from 'react-credit-cards';\nimport {\n  formatCreditCardNumber,\n  formatCVC,\n  formatExpirationDate,\n  formatNumber,\n} from './../../utils/cardUtils';\nimport '../../assets/css/styles-compiled.css';\nimport './index.css'\nimport LoadingOverlay from 'react-loading-overlay';\nimport { CircularProgressbar, buildStyles } from 'react-circular-progressbar';\nimport 'react-confirm-alert/src/react-confirm-alert.css';\nimport 'react-circular-progressbar/dist/styles.css';\nimport { sleepUtil } from '../../utils/sleepUtil';\nimport { toast, ToastContainer } from 'react-toastify';\nimport { checkPaymentStatus, fetchPCIKeys, makePayment, requestSOLFromBackend } from '../../utils/paymentGateway';\nimport { PublicKey } from '@solana/web3.js';\nconst defaultCardValues = {\n  number: '5545 2345 2342 2342',\n  name: 'Solgamer ',\n  expiry: '04/23',\n  cvc: '454',\n  issuer: '',\n  focused: '',\n  amount: '1',\n  equivalentSOL: 1,\n  formData: null,\n};\n\nfunction Purchase() {\n  const history = useHistory();\n  const [progress, setProgress] = useState(0);\n  const [provider, setProvider] = useState(window.solana);\n  const [cardState, setCardState] = useState({\n    ...defaultCardValues,\n  });\n  const [initialText, setText] = useState(\n    'Hold tight, we are deducting the required SOL tokens to play...'\n  );\n\n  const handleInputFocus = (e) => {\n    setCardState({\n      ...cardState,\n\n      focus: e.target.name,\n    });\n  };\n\n  const handleInputChange = (e) => {\n    let { name, value } = e.target;\n    let equivalentSOL = cardState.equivalentSOL;\n    if (name === 'number') {\n      value = formatCreditCardNumber(value);\n    } else if (name === 'expiry') {\n      value = formatExpirationDate(value);\n    } else if (name === 'cvc') {\n      value = formatCVC(value);\n    } else if (name === 'amount') {\n      value = formatNumber(value);\n      equivalentSOL = parseFloat(value) * 100;\n    }\n\n    setCardState({\n      ...cardState,\n      equivalentSOL,\n      [name]: value,\n    });\n  };\n\n  const submitCardTransaction = async () => {\n    let inte = setInterval(\n      () => setProgress((prog) => Math.min(prog + 1, 99)),\n      600\n    );\n    const pciKeys = await fetchPCIKeys();\n    setText('Initiating the transaction...');\n    const result = await makePayment({ ...cardState, ...pciKeys });\n    setText('Checking the payment status...');\n    await checkPaymentStatus(result.paymentData.id);\n    setText(\n      `Transaction successful, We are transferring your account with ${cardState.equivalentSOL\n      } SOL tokens...`\n    );\n    await sleepUtil(2000);\n    clearInterval(inte);\n\n    await requestSOLFromBackend(cardState.equivalentSOL, new PublicKey(provider.publicKey).toBase58())\n\n    setProgress(100);\n    toast.success(\n      `We have successfully transferred ${cardState.equivalentSOL\n      } SOL tokens to your phantom wallet...`\n    );\n    await sleepUtil(3000);\n    toast.info(`Taking you to the game menu...`);\n    await sleepUtil(500);\n    history.push(`/stack`);\n    setCardState({ ...defaultCardValues });\n  };\n\n  return (\n    <LoadingOverlay\n      active={progress > 0 && progress < 100}\n      spinner={\n        <CircularProgressbar\n          value={progress}\n          text={`${progress}%`}\n          styles={buildStyles({\n            width: '300px',\n            // Rotation of path and trail, in number of turns (0-1)\n            // Whether to use rounded or flat corners on the ends - can use 'butt' or 'round'\n\n            strokeLinecap: 'butt',\n            // Text size\n\n            textSize: '16px',\n            // How long animation takes to go from one percentage to another, in seconds\n\n            pathTransitionDuration: 0.5,\n            // Can specify path transition in more detail, or remove it entirely\n            // pathTransition: 'none',\n\n            // Colors\n            pathColor: `#03C221`,\n            textColor: '#fff',\n            trailColor: `#fff`,\n            backgroundColor: '#3e98c7',\n          })}\n        />\n      }\n      text={initialText}\n    >\n      <div>\n        <div\n          style={{\n            backgroundImage: 'url(\"./hero_bg.svg\")',\n            backgroundSize: 'auto 100vh',\n            backgroundAttachment: 'fixed',\n          }}\n        >\n          <div>\n            <div className=\"headingDiv\">\n              <h1>\n                Payment Gateway\n              </h1>\n              <span className=\"text-white\">\n                Note: Dummy details are prefilled. The below transaction can be\n                done with random card details. Please DO NOT enter real card\n                details.\n              </span>\n            </div>\n\n            <br />\n            <div class=\"w-full flex justify-center p-16 rounded-md bg-gray-900 bg-opacity-40 glowing-theme-blue mt-4 paymentDiv\">\n              <div class=\"w-1/2 mx-auto text-gray-400\">\n                <div class=\"mb-4\">\n                  <label class=\"font-bold text-md ml-1 \">Name on card</label>\n                  <div>\n                    <input\n                      type=\"text\"\n                      name=\"name\"\n                      placeholder=\"Name\"\n                      required\n                      value={cardState.name}\n                      onChange={handleInputChange}\n                      onFocus={handleInputFocus}\n                      class=\"w-full px-3 py-3 mt-2 bg-gray-800 mb-1 border-2 border-gray-800 rounded-md focus:outline-none focus:border-indigo-500 transition-colors\"\n                    />\n                  </div>\n                </div>\n                <div class=\"mb-4\">\n                  <label class=\"font-bold text-md ml-1\">Card number</label>\n                  <div>\n                    <input\n                      type=\"tel\"\n                      name=\"number\"\n                      placeholder=\"Card Number\"\n                      value={cardState.number}\n                      onChange={handleInputChange}\n                      onFocus={handleInputFocus}\n                      class=\"w-full px-3 py-3 mt-2 bg-gray-800 mb-1 border-2 border-gray-800 rounded-md focus:outline-none focus:border-indigo-500 transition-colors\"\n                      placeholder=\"0000 0000 0000 0000\"\n                      type=\"text\"\n                    />\n                  </div>\n                </div>\n                <div class=\"mb-4 -mx-2 flex items-end\">\n                  <div class=\"px-2 w-1/2\">\n                    <label class=\"font-bold text-md ml-1\">\n                      Expiration date\n                    </label>\n                    <div>\n                      <input\n                        type=\"tel\"\n                        name=\"expiry\"\n                        placeholder=\"Valid Thru\"\n                        pattern=\"\\d\\d/\\d\\d\"\n                        required\n                        value={cardState.expiry}\n                        onChange={handleInputChange}\n                        onFocus={handleInputFocus}\n                        class=\"w-full px-3 py-3 mt-2 bg-gray-800 mb-1 border-2 border-gray-800 rounded-md focus:outline-none focus:border-indigo-500 transition-colors\"\n                        placeholder=\"04/21\"\n                        type=\"text\"\n                      />\n                    </div>\n                  </div>\n                  <div class=\"mb-4 -mx-2 flex items-end\">\n                    <div class=\"px-2 w-1/2\">\n                      <label class=\"font-bold text-md ml-1\">CVV</label>\n                    </div>\n                    <input\n                      type=\"tel\"\n                      name=\"cvc\"\n                      placeholder=\"CVC\"\n                      pattern=\"\\d{3,4}\"\n                      required\n                      value={cardState.cvc}\n                      onChange={handleInputChange}\n                      onFocus={handleInputFocus}\n                      class=\"w-full px-3 py-3 mt-2  bg-gray-800 mb-1 border-2 border-gray-800 rounded-md focus:outline-none focus:border-indigo-500 transition-colors\"\n                      placeholder=\"CVV\"\n                      type=\"text\"\n                    />\n                  </div>\n                </div>\n                <div class=\"mb-4\">\n                  <label class=\"font-bold text-md ml-1\">\n                    Billing Address\n                  </label>\n                  <div>\n                    <textarea\n                      class=\"w-full px-3 py-2  bg-gray-800 h-48 mt-2 mb-1 border-2 border-gray-800 rounded-md focus:outline-none focus:border-indigo-500 transition-colors\"\n                      placeholder=\"Enter your Address\"\n                      type=\"text\"\n                    />\n                  </div>\n                </div>\n                <div class=\"mb-8\">\n                  <label class=\"font-bold text-md ml-1\">Phone number</label>\n                  <div>\n                    <input\n                      class=\"w-full px-3 py-3 mt-2  bg-gray-800 mb-1 border-2 border-gray-800 rounded-md focus:outline-none focus:border-indigo-500 transition-colors\"\n                      placeholder=\"+919998887771\"\n                      type=\"text\"\n                    />\n                  </div>\n                </div>\n                <div className=\"mb-8\">\n                  <div>\n                    <input\n                      type=\"text\"\n                      name=\"amount\"\n                      className=\"w-full px-4 py-3 my-2 rounded bg-gray-800 bg-opacity-80 text-white\"\n                      placeholder=\"Amount (USD)\"\n                      required\n                      value={cardState.amount}\n                      onChange={handleInputChange}\n                      onFocus={handleInputFocus}\n                    />\n                    <label className=\"pt-2 text-gray-300 text-sm\">\n                      1 USD = 1 SOL\n                    </label>\n                  </div>\n                </div>\n                <div>\n                  <button\n                    class=\"payButton\"\n                    onClick={submitCardTransaction}\n                  >\n                    <i class=\"mdi mdi-lock-outline mr-1\" /> PAY NOW\n                  </button>\n                </div>\n              </div>\n\n              <div class=\"w-1/2 mx-auto text-gray-700 pt-28\">\n                <Cards\n                  cvc={cardState.cvc}\n                  expiry={cardState.expiry}\n                  focused={cardState.focus}\n                  name={cardState.name}\n                  number={cardState.number}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n        <ToastContainer />\n      </div>\n    </LoadingOverlay>\n  );\n}\nexport default Purchase;\n"]},"metadata":{},"sourceType":"module"}